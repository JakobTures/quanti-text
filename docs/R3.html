<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 dplyr | Quantitative Textanalyse mit R</title>
  <meta name="description" content="3 dplyr | Quantitative Textanalyse mit R" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="3 dplyr | Quantitative Textanalyse mit R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="https://github.com/JakobTures/quanti-text.git" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 dplyr | Quantitative Textanalyse mit R" />
  
  
  

<meta name="author" content="Jakob Tures" />


<meta name="date" content="2021-09-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="R2.html"/>
<link rel="next" href="R4.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
Quantitative Textanalyse mit R

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Einleitung</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#quantitative-textanalyse"><i class="fa fa-check"></i>Quantitative Textanalyse</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#beispiele"><i class="fa fa-check"></i>Beispiele</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#kursinhalte"><i class="fa fa-check"></i>Kursinhalte</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#konventionen"><i class="fa fa-check"></i>Konventionen</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#danksagung"><i class="fa fa-check"></i>Danksagung</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#colophon"><i class="fa fa-check"></i>Colophon</a></li>
</ul></li>
<li class="part"><span><b>I R &amp; RStudio</b></span></li>
<li class="chapter" data-level="1" data-path="R1.html"><a href="R1.html"><i class="fa fa-check"></i><b>1</b> R Basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="R1.html"><a href="R1.html#installation"><i class="fa fa-check"></i><b>1.1</b> Installation</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="R1.html"><a href="R1.html#r"><i class="fa fa-check"></i><b>1.1.1</b> R</a></li>
<li class="chapter" data-level="1.1.2" data-path="R1.html"><a href="R1.html#rstudio"><i class="fa fa-check"></i><b>1.1.2</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="R1.html"><a href="R1.html#erste-schritte"><i class="fa fa-check"></i><b>1.2</b> Erste Schritte</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="R1.html"><a href="R1.html#übersicht-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> Übersicht RStudio</a></li>
<li class="chapter" data-level="1.2.2" data-path="R1.html"><a href="R1.html#hello-world"><i class="fa fa-check"></i><b>1.2.2</b> Hello World!</a></li>
<li class="chapter" data-level="1.2.3" data-path="R1.html"><a href="R1.html#rechnen-mit-r"><i class="fa fa-check"></i><b>1.2.3</b> Rechnen mit R</a></li>
<li class="chapter" data-level="1.2.4" data-path="R1.html"><a href="R1.html#vergleichsoperatoren"><i class="fa fa-check"></i><b>1.2.4</b> Vergleichsoperatoren</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="R1.html"><a href="R1.html#objekte"><i class="fa fa-check"></i><b>1.3</b> Objekte</a></li>
<li class="chapter" data-level="1.4" data-path="R1.html"><a href="R1.html#vektoren"><i class="fa fa-check"></i><b>1.4</b> Vektoren</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="R1.html"><a href="R1.html#subsetting"><i class="fa fa-check"></i><b>1.4.1</b> Subsetting</a></li>
<li class="chapter" data-level="1.4.2" data-path="R1.html"><a href="R1.html#typen-von-vektoren"><i class="fa fa-check"></i><b>1.4.2</b> Typen von Vektoren</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="R1.html"><a href="R1.html#weitere-datentypen"><i class="fa fa-check"></i><b>1.5</b> Weitere Datentypen</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="R1.html"><a href="R1.html#data-frames"><i class="fa fa-check"></i><b>1.5.1</b> Data frames</a></li>
<li class="chapter" data-level="1.5.2" data-path="R1.html"><a href="R1.html#listen"><i class="fa fa-check"></i><b>1.5.2</b> Listen</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="R1.html"><a href="R1.html#r-packages"><i class="fa fa-check"></i><b>1.6</b> R packages</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="R1.html"><a href="R1.html#installieren-und-laden"><i class="fa fa-check"></i><b>1.6.1</b> Installieren und Laden</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="R1.html"><a href="R1.html#funktionen"><i class="fa fa-check"></i><b>1.7</b> Funktionen</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="R1.html"><a href="R1.html#namesspaces"><i class="fa fa-check"></i><b>1.7.1</b> namesspaces</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="R2.html"><a href="R2.html"><i class="fa fa-check"></i><b>2</b> RStudio &amp; das tidyverse</a>
<ul>
<li class="chapter" data-level="2.1" data-path="R2.html"><a href="R2.html#rstudio-workflow"><i class="fa fa-check"></i><b>2.1</b> RStudio workflow</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="R2.html"><a href="R2.html#r-scripts"><i class="fa fa-check"></i><b>2.1.1</b> R scripts</a></li>
<li class="chapter" data-level="2.1.2" data-path="R2.html"><a href="R2.html#projekte"><i class="fa fa-check"></i><b>2.1.2</b> Projekte</a></li>
<li class="chapter" data-level="2.1.3" data-path="R2.html"><a href="R2.html#kommentare"><i class="fa fa-check"></i><b>2.1.3</b> Kommentare</a></li>
<li class="chapter" data-level="2.1.4" data-path="R2.html"><a href="R2.html#speichern"><i class="fa fa-check"></i><b>2.1.4</b> Speichern</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="R2.html"><a href="R2.html#tidyverse"><i class="fa fa-check"></i><b>2.2</b> tidyverse</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="R2.html"><a href="R2.html#tidy-data"><i class="fa fa-check"></i><b>2.2.1</b> tidy data</a></li>
<li class="chapter" data-level="2.2.2" data-path="R2.html"><a href="R2.html#tibbles"><i class="fa fa-check"></i><b>2.2.2</b> Tibbles</a></li>
<li class="chapter" data-level="2.2.3" data-path="R2.html"><a href="R2.html#die-pipe"><i class="fa fa-check"></i><b>2.2.3</b> Die Pipe <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="R2.html"><a href="R2.html#hilfe"><i class="fa fa-check"></i><b>2.3</b> Hilfe?</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="R2.html"><a href="R2.html#hilfe-1"><i class="fa fa-check"></i><b>2.3.1</b> Hilfe!</a></li>
<li class="chapter" data-level="2.3.2" data-path="R2.html"><a href="R2.html#empfohlene-externe-resourcen"><i class="fa fa-check"></i><b>2.3.2</b> Empfohlene externe Resourcen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="R3.html"><a href="R3.html"><i class="fa fa-check"></i><b>3</b> dplyr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="R3.html"><a href="R3.html#die-stammdaten-des-19.-bundestags"><i class="fa fa-check"></i><b>3.1</b> Die Stammdaten des 19. Bundestags</a></li>
<li class="chapter" data-level="3.2" data-path="R3.html"><a href="R3.html#data-wrangling-mit-dplyr"><i class="fa fa-check"></i><b>3.2</b> Data wrangling mit dplyr</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="R3.html"><a href="R3.html#filter"><i class="fa fa-check"></i><b>3.2.1</b> <code>filter()</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="R3.html"><a href="R3.html#select"><i class="fa fa-check"></i><b>3.2.2</b> <code>select()</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="R3.html"><a href="R3.html#rename"><i class="fa fa-check"></i><b>3.2.3</b> <code>rename()</code></a></li>
<li class="chapter" data-level="3.2.4" data-path="R3.html"><a href="R3.html#mutate"><i class="fa fa-check"></i><b>3.2.4</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="3.2.5" data-path="R3.html"><a href="R3.html#summarise-group_by"><i class="fa fa-check"></i><b>3.2.5</b> <code>summarise()</code> &amp; <code>group_by()</code></a></li>
<li class="chapter" data-level="3.2.6" data-path="R3.html"><a href="R3.html#speichern-der-daten"><i class="fa fa-check"></i><b>3.2.6</b> Speichern der Daten</a></li>
<li class="chapter" data-level="3.2.7" data-path="R3.html"><a href="R3.html#export-von-tabellen"><i class="fa fa-check"></i><b>3.2.7</b> Export von Tabellen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="R4.html"><a href="R4.html"><i class="fa fa-check"></i><b>4</b> ggplot2</a>
<ul>
<li class="chapter" data-level="4.1" data-path="R4.html"><a href="R4.html#graphische-analyse-mit-ggplot2"><i class="fa fa-check"></i><b>4.1</b> Graphische Analyse mit ggplot2</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="R4.html"><a href="R4.html#ggplot2-syntax"><i class="fa fa-check"></i><b>4.1.1</b> ggplot2 syntax</a></li>
<li class="chapter" data-level="4.1.2" data-path="R4.html"><a href="R4.html#aesthetics-geoms"><i class="fa fa-check"></i><b>4.1.2</b> aesthetics &amp; geoms</a></li>
<li class="chapter" data-level="4.1.3" data-path="R4.html"><a href="R4.html#graphische-analyse-der-stammdaten"><i class="fa fa-check"></i><b>4.1.3</b> Graphische Analyse der Stammdaten</a></li>
<li class="chapter" data-level="4.1.4" data-path="R4.html"><a href="R4.html#graphiken-exportieren"><i class="fa fa-check"></i><b>4.1.4</b> Graphiken exportieren</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Der Datensatz</b></span></li>
<li class="chapter" data-level="5" data-path="BT19.html"><a href="BT19.html"><i class="fa fa-check"></i><b>5</b> Plenarprotokolle des 19. Bundestags</a></li>
<li class="part"><span><b>III tidytext</b></span></li>
<li class="chapter" data-level="6" data-path="tidytext1.html"><a href="tidytext1.html"><i class="fa fa-check"></i><b>6</b> tidytext format &amp; tokenisation</a></li>
<li class="chapter" data-level="7" data-path="tidytext2.html"><a href="tidytext2.html"><i class="fa fa-check"></i><b>7</b> tf &amp; tf-idf</a></li>
<li class="chapter" data-level="8" data-path="tidytext3.html"><a href="tidytext3.html"><i class="fa fa-check"></i><b>8</b> n-grams &amp; correlations</a></li>
<li class="chapter" data-level="9" data-path="tidytext4.html"><a href="tidytext4.html"><i class="fa fa-check"></i><b>9</b> Sentiment Analyse</a></li>
<li class="part"><span><b>IV quanteda</b></span></li>
<li class="chapter" data-level="10" data-path="quanteda1.html"><a href="quanteda1.html"><i class="fa fa-check"></i><b>10</b> corpus, tokenisation &amp; DTM</a></li>
<li class="chapter" data-level="11" data-path="quanteda2.html"><a href="quanteda2.html"><i class="fa fa-check"></i><b>11</b> Anwendungsbeispiele 1</a></li>
<li class="chapter" data-level="12" data-path="quanteda3.html"><a href="quanteda3.html"><i class="fa fa-check"></i><b>12</b> Anwendungsbeispiele 2</a></li>
<li class="part"><span><b>V Machine Learning</b></span></li>
<li class="chapter" data-level="13" data-path="ML1.html"><a href="ML1.html"><i class="fa fa-check"></i><b>13</b> Unsupervised</a></li>
<li class="chapter" data-level="14" data-path="ML2.html"><a href="ML2.html"><i class="fa fa-check"></i><b>14</b> Supervised</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Quantitative Textanalyse mit R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="R3" class="section level1" number="3">
<h1><span class="header-section-number">3</span> dplyr</h1>
<div id="die-stammdaten-des-19.-bundestags" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Die Stammdaten des 19. Bundestags</h2>
<p>Dieses Kapitel behandelt die Bereinigung, Transformation und deskriptive
statistische Analyse von Daten mit <strong>dplyr</strong>, sowie deren graphische Analyse mit
<strong>ggplot2</strong>. Zur Veranschaulichung der Arbeitsschritte, analysieren wir eine
Auswahl biographischer Daten der Bundestagsabgeordneten des 19. Bundestags. Die
Daten stammen aus einer vom Bundestag bereitgestellten “.xml” Datei und wurden
am 07.09.2021 von folgender URL heruuntergeladen:
<a href="https://www.bundestag.de/services/opendata" target="_blank">https://www.bundestag.de/services/opendata</a></p>
<p>Das script zur Extraktion der interessierenden Variablen aus den XML Daten und
der Konstruktion des hier genutzten tibbles, finden Sie in meinem GitHub:
<a href="https://github.com/JakobTures/quanti-text/blob/master/scripts/stammdaten.R" target="_blank">https://github.com/JakobTures/quanti-text/blob/master/scripts/stammdaten.R</a></p>
<p>Das script speichert den tibble in der Datei “stammdaten.RData”, die von
Seminarteilnehmern auch in Moodle heruntergeladen werden kann. Laden wir diese
Daten zunächst in R. Da es sich bei dem zu ladenden Datenobjekt um einen tibble
handelt, müssen wir auch zunächst das <strong>tidyverse</strong> package laden. R kennt ohne
dieses keine tibble und interpretiert das Objekt als data frame.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="R3.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb54-2"><a href="R3.html#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="R3.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;stammdaten.RData&quot;</span>)</span></code></pre></div>
<p>Die Datei enthielt als Einziges das Objekt <code>stammdaten</code>, einen tibble der die
ausgewählten Stammdaten aller jetzigen und ehemaligen Bundestagsabgeordneten
enthält. Schauen wir uns den tibble einmal an:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="R3.html#cb55-1" aria-hidden="true" tabindex="-1"></a>stammdaten</span>
<span id="cb55-2"><a href="R3.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4,089 × 8</span></span>
<span id="cb55-3"><a href="R3.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname  vorname   Titel     Partei erste_WP letzte_WP alter geb       </span></span>
<span id="cb55-4"><a href="R3.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;     </span></span>
<span id="cb55-5"><a href="R3.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Abelein   Manfred   Prof. Dr. CDU           5        11    86 20.10.1930</span></span>
<span id="cb55-6"><a href="R3.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Achenbach Ernst     Dr.       FDP           3         7   108 09.04.1909</span></span>
<span id="cb55-7"><a href="R3.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Ackermann Annemarie &lt;NA&gt;      CDU           2         4   104 26.05.1913</span></span>
<span id="cb55-8"><a href="R3.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Ackermann Else      Dr.       CDU          11        12    83 06.11.1933</span></span>
<span id="cb55-9"><a href="R3.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Adam      Ulrich    &lt;NA&gt;      CDU          12        16    67 09.06.1950</span></span>
<span id="cb55-10"><a href="R3.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Adams     Rudolf    &lt;NA&gt;      SPD           5         8    97 10.11.1919</span></span>
<span id="cb55-11"><a href="R3.html#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Adelmann  Raban     &lt;NA&gt;      CDU           3         3   104 28.09.1912</span></span>
<span id="cb55-12"><a href="R3.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Adenauer  Konrad    Dr.       CDU           1         5   141 05.01.1876</span></span>
<span id="cb55-13"><a href="R3.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Adler     Brigitte  &lt;NA&gt;      SPD          11        14    73 22.06.1944</span></span>
<span id="cb55-14"><a href="R3.html#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Adorno    Eduard    &lt;NA&gt;      CDU           4         6    96 31.10.1920</span></span>
<span id="cb55-15"><a href="R3.html#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 4,079 more rows</span></span></code></pre></div>
<p>Der tibble enthält 4089 Zeilen, also Daten zu 4089 Abgeordneten. Zu jeder
Beobachtung, stehen 8 Variablen bereit. Nachname, Vorname, akademischer Titel,
Parteizugehörigkeit, die erste und letzte Wahlperiode in der das MdB im
Bundestag vertreten war sowie Alter und Geburtsdatum.</p>
<p>Wie Sie sehen, werden bei tibbles standardmäßig nur die ersten 10 Zeilen
gedruckt. Die Darstellung ist dadurch kompakt und übersichtlich, eventuell
könnten wir aber daran interessiert sein mehr als 10 Zeilen zu sehen. Ein Weg
ist das anklicken des Objekts im “Environment” Tab oder das äquivalente
Schreiben von <code>View(objektname)</code> in der console. Nun öffnet sich das Objekt in
einem neuen Tab und kann komplett betrachtet werden. Ein anderer Weg ist es R zu
zwingen mehr Zeilen in die console abzudrucken. Dies ist mit der Funktion
<code>print()</code> möglich. Als zweites Argument können wir mir <code>n =</code> angeben, wie viele
Zeilen wir sehen möchten.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="R3.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(stammdaten, <span class="at">n =</span> <span class="dv">20</span>)</span>
<span id="cb56-2"><a href="R3.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4,089 × 8</span></span>
<span id="cb56-3"><a href="R3.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname  vorname   Titel     Partei erste_WP letzte_WP alter geb       </span></span>
<span id="cb56-4"><a href="R3.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;     </span></span>
<span id="cb56-5"><a href="R3.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Abelein   Manfred   Prof. Dr. CDU           5        11    86 20.10.1930</span></span>
<span id="cb56-6"><a href="R3.html#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Achenbach Ernst     Dr.       FDP           3         7   108 09.04.1909</span></span>
<span id="cb56-7"><a href="R3.html#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Ackermann Annemarie &lt;NA&gt;      CDU           2         4   104 26.05.1913</span></span>
<span id="cb56-8"><a href="R3.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Ackermann Else      Dr.       CDU          11        12    83 06.11.1933</span></span>
<span id="cb56-9"><a href="R3.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Adam      Ulrich    &lt;NA&gt;      CDU          12        16    67 09.06.1950</span></span>
<span id="cb56-10"><a href="R3.html#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Adams     Rudolf    &lt;NA&gt;      SPD           5         8    97 10.11.1919</span></span>
<span id="cb56-11"><a href="R3.html#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Adelmann  Raban     &lt;NA&gt;      CDU           3         3   104 28.09.1912</span></span>
<span id="cb56-12"><a href="R3.html#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Adenauer  Konrad    Dr.       CDU           1         5   141 05.01.1876</span></span>
<span id="cb56-13"><a href="R3.html#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Adler     Brigitte  &lt;NA&gt;      SPD          11        14    73 22.06.1944</span></span>
<span id="cb56-14"><a href="R3.html#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Adorno    Eduard    &lt;NA&gt;      CDU           4         6    96 31.10.1920</span></span>
<span id="cb56-15"><a href="R3.html#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 Aerssen   Jochen    Dr.       CDU           8         9    76 15.04.1941</span></span>
<span id="cb56-16"><a href="R3.html#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 Agatz     Willi     &lt;NA&gt;      KPD           1         1   113 10.06.1904</span></span>
<span id="cb56-17"><a href="R3.html#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 Ahlers    Conrad    &lt;NA&gt;      SPD           7         8    94 08.11.1922</span></span>
<span id="cb56-18"><a href="R3.html#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 Ahrens    Adolf     &lt;NA&gt;      DP            1         1   138 17.09.1879</span></span>
<span id="cb56-19"><a href="R3.html#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 15 Ahrens    Hermann   &lt;NA&gt;      SPD           5         5   115 08.04.1902</span></span>
<span id="cb56-20"><a href="R3.html#cb56-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 16 Ahrens    Karl      Dr.       SPD           6        11    93 13.03.1924</span></span>
<span id="cb56-21"><a href="R3.html#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 17 Aigner    Heinrich  Dr.       CSU           3         8    93 25.05.1924</span></span>
<span id="cb56-22"><a href="R3.html#cb56-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 18 Alber     Siegbert  Prof. Dr. CDU           6         8    81 27.07.1936</span></span>
<span id="cb56-23"><a href="R3.html#cb56-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 19 Albers    Johannes  &lt;NA&gt;      CDU           1         2   127 08.03.1890</span></span>
<span id="cb56-24"><a href="R3.html#cb56-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 20 Albertz   Luise     &lt;NA&gt;      SPD           1         5   116 22.06.1901</span></span>
<span id="cb56-25"><a href="R3.html#cb56-25" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 4,069 more rows</span></span></code></pre></div>
</div>
<div id="data-wrangling-mit-dplyr" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Data wrangling mit dplyr</h2>
<p>Das <strong>dplyr</strong> package enthält eine Reihe von Funktionen zur Bereinigung,
Transformation und deskriptiven Analyse von Daten. Wir beginnen damit, Zeilen
und Spalten die wir nicht benötigen aus dem tibble zu entfernen, bevor wir die
Daten in einigen bestehenden Spalten transformieren und neue Spalten aus den
vorhandenen Daten erzeugen sowie gruppierte Zusammenfassungen der Daten
berechnen.</p>
<div id="filter" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> <code>filter()</code></h3>
<p><code>filter()</code> dient dazu, Beobachtungen – also Zeilen – aus einem tibble zu
filtern. Die Funktion nimmt dabei die Daten auf die es angewandt werden soll als
erstes und eine oder mehrere expressions als zweites Argument. Diese Ausdrücke
sind letztlich die Regeln, nach denen die Funktion filtern soll.</p>
<p>Zum Schreiben der Ausdrücke benötigen wir <em>vergleichende Operatoren</em>. Diese
vergleichen den Wert auf der linken Seite des Operators mit dem auf der rechten,
und geben als Ergebnis ein <code>TRUE</code> zurück wenn der Test bestanden wurde
bwziehungsweise <code>FALSE</code> wenn er nicht bestanden wurde.</p>
<p>Um zu testen ob zwei Werte gleich sind, nutzen wir den Operator <code>==</code>. Bitte
beachten Sie, dass wir zwei Gleichheitszeichen nutzen müssen. <code>==</code> vergleicht
zwei Werte, während <code>=</code> den Wert auf der linken Seite mit dem auf der rechten
Seite überschreibt. Möchten wir testen ob zwei Werte nicht gleich sind, nutzen
wir <code>!=</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="R3.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="dv">42</span> <span class="sc">==</span> <span class="dv">42</span></span>
<span id="cb57-2"><a href="R3.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb57-3"><a href="R3.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="dv">42</span> <span class="sc">!=</span> <span class="dv">42</span></span>
<span id="cb57-4"><a href="R3.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span></code></pre></div>
<p>Ebenfalls können wir vergleichen ob der linke Werte kleiner <code>&lt;</code>, kleiner-gleich
<code>&lt;=</code>, größer <code>&gt;</code> oder größer-gleich <code>&gt;=</code> ist.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="R3.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">&lt;</span> <span class="dv">42</span></span>
<span id="cb58-2"><a href="R3.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb58-3"><a href="R3.html#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="dv">42</span> <span class="sc">&lt;=</span> <span class="dv">42</span></span>
<span id="cb58-4"><a href="R3.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb58-5"><a href="R3.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">42</span></span>
<span id="cb58-6"><a href="R3.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb58-7"><a href="R3.html#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="dv">90</span> <span class="sc">&gt;=</span> <span class="dv">42</span></span>
<span id="cb58-8"><a href="R3.html#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p>Wir könnten nun beispielsweise daran interessiert sein, nur die Daten bestimmter
Parteien zu analysieren. Filtern wir zunächst die Stammdaten der CDU-Abgeordneten
heraus. Wir können dazu in <code>filter()</code> testen, ob der Wert der Spalte “Partei”
gleich dem Wert “CDU” ist.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="R3.html#cb59-1" aria-hidden="true" tabindex="-1"></a>stammdaten <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="R3.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Partei <span class="sc">==</span> <span class="st">&quot;CDU&quot;</span>)</span>
<span id="cb59-3"><a href="R3.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1,347 × 8</span></span>
<span id="cb59-4"><a href="R3.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname  vorname   Titel     Partei erste_WP letzte_WP alter geb       </span></span>
<span id="cb59-5"><a href="R3.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;     </span></span>
<span id="cb59-6"><a href="R3.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Abelein   Manfred   Prof. Dr. CDU           5        11    86 20.10.1930</span></span>
<span id="cb59-7"><a href="R3.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Ackermann Annemarie &lt;NA&gt;      CDU           2         4   104 26.05.1913</span></span>
<span id="cb59-8"><a href="R3.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Ackermann Else      Dr.       CDU          11        12    83 06.11.1933</span></span>
<span id="cb59-9"><a href="R3.html#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Adam      Ulrich    &lt;NA&gt;      CDU          12        16    67 09.06.1950</span></span>
<span id="cb59-10"><a href="R3.html#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Adelmann  Raban     &lt;NA&gt;      CDU           3         3   104 28.09.1912</span></span>
<span id="cb59-11"><a href="R3.html#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Adenauer  Konrad    Dr.       CDU           1         5   141 05.01.1876</span></span>
<span id="cb59-12"><a href="R3.html#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Adorno    Eduard    &lt;NA&gt;      CDU           4         6    96 31.10.1920</span></span>
<span id="cb59-13"><a href="R3.html#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Aerssen   Jochen    Dr.       CDU           8         9    76 15.04.1941</span></span>
<span id="cb59-14"><a href="R3.html#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Alber     Siegbert  Prof. Dr. CDU           6         8    81 27.07.1936</span></span>
<span id="cb59-15"><a href="R3.html#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Albers    Johannes  &lt;NA&gt;      CDU           1         2   127 08.03.1890</span></span>
<span id="cb59-16"><a href="R3.html#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 1,337 more rows</span></span></code></pre></div>
<p>Möchten wir mehrere Ausdrücke kombinieren, benötigen wir dazu
<em>logische Operatoren</em>. <code>&amp;</code> – <em>UND</em> – testet ob beide verbundenen Ausdrücke
gleichzeitig <code>TRUE</code> sind und gibt nur dann <code>TRUE</code> zurück. <code>|</code> – <em>ODER</em> –
testet ob wenigstens einer der verbundenen Ausdrücke <code>TRUE</code> ist und gibt in
diesem fall <code>TRUE</code> zurück. Dies sind alle möglichen Kombinationen für 2
Ausdrücke:</p>
<ul>
<li><code>TRUE &amp; TRUE</code> gibt <code>TRUE</code> zurück</li>
<li><code>TRUE &amp; FALSE</code>, <code>FALSE &amp; TRUE</code> und <code>FALSE &amp; FALSE</code> geben alle <code>FALSE</code> zurück</li>
<li><code>TRUE | TRUE</code>, <code>TRUE | FALSE</code> und <code>FALSE | TRUE</code> geben alle <code>TRUE</code> zurück</li>
<li><code>FALSE | FALSE</code> gibt <code>FALSE</code> zurück</li>
</ul>
<p>Möchten wir nun beispielsweise alle CDU-Mitglieder des 19. Bundestags filtern,
können wir dazu den <code>&amp;</code> Operator einsetzen:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="R3.html#cb60-1" aria-hidden="true" tabindex="-1"></a>stammdaten <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="R3.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Partei <span class="sc">==</span> <span class="st">&quot;CDU&quot;</span> <span class="sc">&amp;</span> letzte_WP <span class="sc">==</span> <span class="dv">19</span>)</span>
<span id="cb60-3"><a href="R3.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 201 × 8</span></span>
<span id="cb60-4"><a href="R3.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname vorname      Titel Partei erste_WP letzte_WP alter geb       </span></span>
<span id="cb60-5"><a href="R3.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;     </span></span>
<span id="cb60-6"><a href="R3.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser   Peter        &lt;NA&gt;  CDU          12        19    65 23.07.1952</span></span>
<span id="cb60-7"><a href="R3.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Fuchtel  Hans-Joachim &lt;NA&gt;  CDU          11        19    65 13.02.1952</span></span>
<span id="cb60-8"><a href="R3.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Kauder   Volker       &lt;NA&gt;  CDU          12        19    68 03.09.1949</span></span>
<span id="cb60-9"><a href="R3.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Landgraf Katharina    &lt;NA&gt;  CDU          11        19    63 24.02.1954</span></span>
<span id="cb60-10"><a href="R3.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Merkel   Angela       Dr.   CDU          12        19    63 17.07.1954</span></span>
<span id="cb60-11"><a href="R3.html#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Schäuble Wolfgang     Dr.   CDU           7        19    75 18.09.1942</span></span>
<span id="cb60-12"><a href="R3.html#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Stübgen  Michael      &lt;NA&gt;  CDU          12        19    57 17.10.1959</span></span>
<span id="cb60-13"><a href="R3.html#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Altmaier Peter        &lt;NA&gt;  CDU          13        19    59 18.06.1958</span></span>
<span id="cb60-14"><a href="R3.html#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Gröhe    Hermann      &lt;NA&gt;  CDU          13        19    56 25.02.1961</span></span>
<span id="cb60-15"><a href="R3.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Grund    Manfred      &lt;NA&gt;  CDU          13        19    62 03.07.1955</span></span>
<span id="cb60-16"><a href="R3.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 191 more rows</span></span></code></pre></div>
<p>Statt mit <code>&amp;</code> können wir in <code>filter()</code> Ausdrücke auch mit <code>,</code> verbinden. Das <code>|</code>
lässt sich aber nicht auf ähnlichem Weg ersetzen. Möchten wir Unionsmitglieder
filtern, also CDU- und CSU-Mitglieder, können wir dies mit <code>|</code> realisieren:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="R3.html#cb61-1" aria-hidden="true" tabindex="-1"></a>stammdaten <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="R3.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Partei <span class="sc">==</span> <span class="st">&quot;CDU&quot;</span> <span class="sc">|</span> Partei <span class="sc">==</span> <span class="st">&quot;CSU&quot;</span>)</span>
<span id="cb61-3"><a href="R3.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1,616 × 8</span></span>
<span id="cb61-4"><a href="R3.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname  vorname   Titel     Partei erste_WP letzte_WP alter geb       </span></span>
<span id="cb61-5"><a href="R3.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;     </span></span>
<span id="cb61-6"><a href="R3.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Abelein   Manfred   Prof. Dr. CDU           5        11    86 20.10.1930</span></span>
<span id="cb61-7"><a href="R3.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Ackermann Annemarie &lt;NA&gt;      CDU           2         4   104 26.05.1913</span></span>
<span id="cb61-8"><a href="R3.html#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Ackermann Else      Dr.       CDU          11        12    83 06.11.1933</span></span>
<span id="cb61-9"><a href="R3.html#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Adam      Ulrich    &lt;NA&gt;      CDU          12        16    67 09.06.1950</span></span>
<span id="cb61-10"><a href="R3.html#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Adelmann  Raban     &lt;NA&gt;      CDU           3         3   104 28.09.1912</span></span>
<span id="cb61-11"><a href="R3.html#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Adenauer  Konrad    Dr.       CDU           1         5   141 05.01.1876</span></span>
<span id="cb61-12"><a href="R3.html#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Adorno    Eduard    &lt;NA&gt;      CDU           4         6    96 31.10.1920</span></span>
<span id="cb61-13"><a href="R3.html#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Aerssen   Jochen    Dr.       CDU           8         9    76 15.04.1941</span></span>
<span id="cb61-14"><a href="R3.html#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Aigner    Heinrich  Dr.       CSU           3         8    93 25.05.1924</span></span>
<span id="cb61-15"><a href="R3.html#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Alber     Siegbert  Prof. Dr. CDU           6         8    81 27.07.1936</span></span>
<span id="cb61-16"><a href="R3.html#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 1,606 more rows</span></span></code></pre></div>
<p>Es lassen sich auch mehr als zwei Ausdrücke mit <code>&amp;</code>und <code>|</code> kombinieren.</p>
<p>Die Daten enthalten aktuell noch alle Abgeordneten die jemals ein Mandat im
Bundestag hatten. Mit <code>filter()</code> können wir den Datensatz auf diejenigen
reduzieren, die auch im 19. Bundestag vertreten waren.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="R3.html#cb62-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="R3.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(letzte_WP <span class="sc">==</span> <span class="dv">19</span>)</span></code></pre></div>
<p>Ab hier arbeiten wir mit dem Objekt <code>stammdaten_19</code> weiter.</p>
</div>
<div id="select" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> <code>select()</code></h3>
<p>Möchten wir ein subset von Variablen bilden, könne wir dazu <code>select()</code> nutzen.
Die Funktion nimmt die Daten auf die sie angewendet werden soll als erstes
Argument – hier weitergegeben durch die pipe – und dann einen oder mehrere
Spaltennamen, die im tibble verbleiben sollen. Folgen die zu behaltenden Spalten
aufeinander, können wir auch eine “von:bis” Notation nutzen. Nehmen wir an, wir
möchten Die Spalten “nachname”, “vorname”, “Titel” und “Partei” extrahieren:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="R3.html#cb63-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="R3.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nachname, vorname, Titel, Partei)</span>
<span id="cb63-3"><a href="R3.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 4</span></span>
<span id="cb63-4"><a href="R3.html#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname vorname      Titel Partei    </span></span>
<span id="cb63-5"><a href="R3.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     </span></span>
<span id="cb63-6"><a href="R3.html#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser   Peter        &lt;NA&gt;  CDU       </span></span>
<span id="cb63-7"><a href="R3.html#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Brecht   Eberhard     Dr.   SPD       </span></span>
<span id="cb63-8"><a href="R3.html#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dehm     Diether      Dr.   DIE LINKE.</span></span>
<span id="cb63-9"><a href="R3.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fuchtel  Hans-Joachim &lt;NA&gt;  CDU       </span></span>
<span id="cb63-10"><a href="R3.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Gysi     Gregor       Dr.   DIE LINKE.</span></span>
<span id="cb63-11"><a href="R3.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Jelpke   Ulla         &lt;NA&gt;  DIE LINKE.</span></span>
<span id="cb63-12"><a href="R3.html#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Kauder   Volker       &lt;NA&gt;  CDU       </span></span>
<span id="cb63-13"><a href="R3.html#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Kubicki  Wolfgang     &lt;NA&gt;  FDP       </span></span>
<span id="cb63-14"><a href="R3.html#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Landgraf Katharina    &lt;NA&gt;  CDU       </span></span>
<span id="cb63-15"><a href="R3.html#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Matschie Christoph    &lt;NA&gt;  SPD       </span></span>
<span id="cb63-16"><a href="R3.html#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span>
<span id="cb63-17"><a href="R3.html#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="R3.html#cb63-18" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb63-19"><a href="R3.html#cb63-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nachname<span class="sc">:</span>Titel, Partei)</span>
<span id="cb63-20"><a href="R3.html#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 4</span></span>
<span id="cb63-21"><a href="R3.html#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname vorname      Titel Partei    </span></span>
<span id="cb63-22"><a href="R3.html#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;     </span></span>
<span id="cb63-23"><a href="R3.html#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser   Peter        &lt;NA&gt;  CDU       </span></span>
<span id="cb63-24"><a href="R3.html#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Brecht   Eberhard     Dr.   SPD       </span></span>
<span id="cb63-25"><a href="R3.html#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dehm     Diether      Dr.   DIE LINKE.</span></span>
<span id="cb63-26"><a href="R3.html#cb63-26" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fuchtel  Hans-Joachim &lt;NA&gt;  CDU       </span></span>
<span id="cb63-27"><a href="R3.html#cb63-27" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Gysi     Gregor       Dr.   DIE LINKE.</span></span>
<span id="cb63-28"><a href="R3.html#cb63-28" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Jelpke   Ulla         &lt;NA&gt;  DIE LINKE.</span></span>
<span id="cb63-29"><a href="R3.html#cb63-29" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Kauder   Volker       &lt;NA&gt;  CDU       </span></span>
<span id="cb63-30"><a href="R3.html#cb63-30" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Kubicki  Wolfgang     &lt;NA&gt;  FDP       </span></span>
<span id="cb63-31"><a href="R3.html#cb63-31" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Landgraf Katharina    &lt;NA&gt;  CDU       </span></span>
<span id="cb63-32"><a href="R3.html#cb63-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Matschie Christoph    &lt;NA&gt;  SPD       </span></span>
<span id="cb63-33"><a href="R3.html#cb63-33" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
<p>Wir können <code>select()</code>auch nutzen um Variablen zu entfernen. Dazu schreiben wir
<code>-</code> vor den zu entfernenden Spaltennamen. Da das genaue Geburtsdatum der
Abgeordneten im Folgenden nicht mehr benötigt wird, können wir die Spalte “geb”
entfernen.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="R3.html#cb64-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="R3.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>geb)</span>
<span id="cb64-3"><a href="R3.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="R3.html#cb64-4" aria-hidden="true" tabindex="-1"></a>stammdaten_19</span>
<span id="cb64-5"><a href="R3.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 7</span></span>
<span id="cb64-6"><a href="R3.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname vorname      Titel Partei     erste_WP letzte_WP alter</span></span>
<span id="cb64-7"><a href="R3.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb64-8"><a href="R3.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser   Peter        &lt;NA&gt;  CDU              12        19    65</span></span>
<span id="cb64-9"><a href="R3.html#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Brecht   Eberhard     Dr.   SPD              12        19    67</span></span>
<span id="cb64-10"><a href="R3.html#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dehm     Diether      Dr.   DIE LINKE.       12        19    67</span></span>
<span id="cb64-11"><a href="R3.html#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fuchtel  Hans-Joachim &lt;NA&gt;  CDU              11        19    65</span></span>
<span id="cb64-12"><a href="R3.html#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Gysi     Gregor       Dr.   DIE LINKE.       11        19    69</span></span>
<span id="cb64-13"><a href="R3.html#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Jelpke   Ulla         &lt;NA&gt;  DIE LINKE.       12        19    66</span></span>
<span id="cb64-14"><a href="R3.html#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Kauder   Volker       &lt;NA&gt;  CDU              12        19    68</span></span>
<span id="cb64-15"><a href="R3.html#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Kubicki  Wolfgang     &lt;NA&gt;  FDP              12        19    65</span></span>
<span id="cb64-16"><a href="R3.html#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Landgraf Katharina    &lt;NA&gt;  CDU              11        19    63</span></span>
<span id="cb64-17"><a href="R3.html#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Matschie Christoph    &lt;NA&gt;  SPD              12        19    56</span></span>
<span id="cb64-18"><a href="R3.html#cb64-18" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
</div>
<div id="rename" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> <code>rename()</code></h3>
<p>Ihnen wird eventuell bereits aufgefallen sein, dass die meisten Spaltennamen mit
einem kleingeschriebenen Buchstaben beginnen, “Titel” und “Partei” aber nicht.
Da habe ich anscheinend beim Erstellen des Datenobjekts meine eigenen
Namenskonventionen – alles beginnt mit kleinen Buchstaben – ausser Acht
gelassen. Um diese nun umzubenennen, können wir <code>rename()</code> nutzen. Erneut werden
als erstes Argument die Daten durch die pipe weitergegeben, gefolgt von einem
oder mehreren Argumenten in der Form <code>neuer_name = alter_name</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="R3.html#cb65-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="R3.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">titel =</span> Titel,</span>
<span id="cb65-3"><a href="R3.html#cb65-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">partei =</span> Partei)</span>
<span id="cb65-4"><a href="R3.html#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="R3.html#cb65-5" aria-hidden="true" tabindex="-1"></a>stammdaten_19</span>
<span id="cb65-6"><a href="R3.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 7</span></span>
<span id="cb65-7"><a href="R3.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname vorname      titel partei     erste_WP letzte_WP alter</span></span>
<span id="cb65-8"><a href="R3.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb65-9"><a href="R3.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser   Peter        &lt;NA&gt;  CDU              12        19    65</span></span>
<span id="cb65-10"><a href="R3.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Brecht   Eberhard     Dr.   SPD              12        19    67</span></span>
<span id="cb65-11"><a href="R3.html#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dehm     Diether      Dr.   DIE LINKE.       12        19    67</span></span>
<span id="cb65-12"><a href="R3.html#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fuchtel  Hans-Joachim &lt;NA&gt;  CDU              11        19    65</span></span>
<span id="cb65-13"><a href="R3.html#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Gysi     Gregor       Dr.   DIE LINKE.       11        19    69</span></span>
<span id="cb65-14"><a href="R3.html#cb65-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Jelpke   Ulla         &lt;NA&gt;  DIE LINKE.       12        19    66</span></span>
<span id="cb65-15"><a href="R3.html#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Kauder   Volker       &lt;NA&gt;  CDU              12        19    68</span></span>
<span id="cb65-16"><a href="R3.html#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Kubicki  Wolfgang     &lt;NA&gt;  FDP              12        19    65</span></span>
<span id="cb65-17"><a href="R3.html#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Landgraf Katharina    &lt;NA&gt;  CDU              11        19    63</span></span>
<span id="cb65-18"><a href="R3.html#cb65-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Matschie Christoph    &lt;NA&gt;  SPD              12        19    56</span></span>
<span id="cb65-19"><a href="R3.html#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> <code>mutate()</code></h3>
<p><code>mutate()</code> dient dazu Daten in bestehenden Spalten zu transformieren und neue
Spalten aus den Daten bestehender Spalten zu generieren.</p>
<p>Aktuell ist der Name über zwei Spalten verteilt. Möchten wir stattdessen eine
Spalte mit dem kompletten Namen erstellen, können wir dies mit <code>mutate()</code>
umsetzen. Generell schreiben wir innerhalb der Klammern den Namen der zu
transformierenden oder neu zu erstellenden Spalte <code>=</code> einem Ausdruck der
beschreibt, wir die Daten transformiert oder generiert werden sollen. Dies kann
eine einfache Berechnung wie <code>mutate(neue_spalte = spalte_a + spalte b)</code> sein,
aber auch weitere Funktionen beinhalten. Hier nutzen wir die Funktion <code>str_c()</code>
aus dem core tidyverse package <strong>stringr</strong> um zwei Strings zu einem zu
kombinieren. Das optionale Argument <code>sep =</code> wird dazu genutzt festzulegen,
welche Zeichen zwischen die zu kombinierenden Strings eingefügt werden. Setzen
wir dies um und betrachten die neue sowie die alten Spalten:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="R3.html#cb66-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="R3.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_c</span>(nachname, vorname, <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>))</span>
<span id="cb66-3"><a href="R3.html#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="R3.html#cb66-4" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb66-5"><a href="R3.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nachname, vorname, name)</span>
<span id="cb66-6"><a href="R3.html#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 3</span></span>
<span id="cb66-7"><a href="R3.html#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    nachname vorname      name                 </span></span>
<span id="cb66-8"><a href="R3.html#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;                </span></span>
<span id="cb66-9"><a href="R3.html#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser   Peter        Bleser, Peter        </span></span>
<span id="cb66-10"><a href="R3.html#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Brecht   Eberhard     Brecht, Eberhard     </span></span>
<span id="cb66-11"><a href="R3.html#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dehm     Diether      Dehm, Diether        </span></span>
<span id="cb66-12"><a href="R3.html#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fuchtel  Hans-Joachim Fuchtel, Hans-Joachim</span></span>
<span id="cb66-13"><a href="R3.html#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Gysi     Gregor       Gysi, Gregor         </span></span>
<span id="cb66-14"><a href="R3.html#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Jelpke   Ulla         Jelpke, Ulla         </span></span>
<span id="cb66-15"><a href="R3.html#cb66-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Kauder   Volker       Kauder, Volker       </span></span>
<span id="cb66-16"><a href="R3.html#cb66-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Kubicki  Wolfgang     Kubicki, Wolfgang    </span></span>
<span id="cb66-17"><a href="R3.html#cb66-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Landgraf Katharina    Landgraf, Katharina  </span></span>
<span id="cb66-18"><a href="R3.html#cb66-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Matschie Christoph    Matschie, Christoph  </span></span>
<span id="cb66-19"><a href="R3.html#cb66-19" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
<p>Die Spalte “titel” listet aktuell die akademischen Titel der Abgeordneten. Liegt
ein Titel vor, wird dieser benannt. Liegt keiner vor enthält die Spalte ein
<code>NA</code>, die Repräsentation fehlender Werte in R. Für diese Analyse interessiert
uns nur ob ein Titel vorliegt, aber nicht welcher. Dazu könnten wir eine neue
Spalte generieren, welche einen logischen Vektor enthält der angibt ob ein Titel
vorliegt, <code>TRUE</code>, oder nicht, <code>FALSE</code>. Dies ist eine sogenannte Dummyvariable.
Zum generieren können wir die <strong>dplyr</strong> Funktion <code>if_else()</code> nutzen. Wir geben
als erstes Argument eine Bedingung an die getestet wird. Hier <code>!is.na(titel)</code>,
was testet ob der Inhalt von “titel” <em>nicht</em> – angezeigt durch das <code>!</code> –
missing ist. Das zweite und dritte Argument geben an, was eingesetzt werden soll
wenn die getestete Bedingung erfüllt beziehungsweise nicht erfüllt ist. Hier
soll im ersten Fall <code>TRUE</code>, im zweiten <code>FALSE</code> eingesetzt werden.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="R3.html#cb67-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="R3.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">titel_dummy =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(titel), <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb67-3"><a href="R3.html#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="R3.html#cb67-4" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb67-5"><a href="R3.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(titel, titel_dummy)</span>
<span id="cb67-6"><a href="R3.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 2</span></span>
<span id="cb67-7"><a href="R3.html#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    titel titel_dummy</span></span>
<span id="cb67-8"><a href="R3.html#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;lgl&gt;      </span></span>
<span id="cb67-9"><a href="R3.html#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-10"><a href="R3.html#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Dr.   TRUE       </span></span>
<span id="cb67-11"><a href="R3.html#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dr.   TRUE       </span></span>
<span id="cb67-12"><a href="R3.html#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-13"><a href="R3.html#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Dr.   TRUE       </span></span>
<span id="cb67-14"><a href="R3.html#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-15"><a href="R3.html#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-16"><a href="R3.html#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-17"><a href="R3.html#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-18"><a href="R3.html#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 &lt;NA&gt;  FALSE      </span></span>
<span id="cb67-19"><a href="R3.html#cb67-19" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
<p>Die Spalte “partei” ist auch als character vector abgelegt. Bei der
Parteizugehörigkeit handelt es sich um eine kategoriale Variable. So gibt es nur
eine begrenzte Anzahl möglicher Ausprägungen, nämlich die Namen der im 19.
Bundestag vertretenen Parteien sowie die Kategorie “Parteilos”. Die
Repräsentation kategorialer Variablen in R nennt sich <em>factor</em>. Das core
tidyverse package <strong>forcats</strong> ermöglicht es uns Faktorvariablen anzulegen und zu
manipulieren. Dies erleichtert vor allem die graphische Analyse im weiteren
Verlauf des Kapitels.</p>
<p>Der einfachste Weg ist es, R selbst auslesen zu lassen welche Kategorien in
einer Variable vorhanden sind. Dazu wenden wir einfach die Funktion <code>factor()</code>
innerhalb von <code>mutate()</code> auf eine Spalte an.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="R3.html#cb68-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="R3.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partei =</span> <span class="fu">factor</span>(partei))</span></code></pre></div>
<p>Um herauszufinden welche Kategorien ein factor vector umfasst, nutzen wir
<code>levels()</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="R3.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(stammdaten_19<span class="sc">$</span>partei)</span>
<span id="cb69-2"><a href="R3.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;AfD&quot;                   &quot;BÜNDNIS 90/DIE GRÜNEN&quot; &quot;CDU&quot;                  </span></span>
<span id="cb69-3"><a href="R3.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &quot;CSU&quot;                   &quot;DIE LINKE.&quot;            &quot;FDP&quot;                  </span></span>
<span id="cb69-4"><a href="R3.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [7] &quot;Plos&quot;                  &quot;SPD&quot;</span></span></code></pre></div>
<p>Dies scheint funktioniert zu haben, es fallen aber auch zwei Probleme auf um die
wir uns noch kümmern sollten. Erstens könnten wir daran interessiert sein die
Union als ganzes zu analysiseren. Zweitens sind die Kategorien aktuell
alphabetisch geordnet, inhaltlicher sinnvoller wäre aber beispielsweise eine
Ordnung anhand der größe der Fraktionen im 19. Bundestag.</p>
<p>Fassen wir zuerst “CDU” und “CDU” zur “Union” zusammen. Dazu können wir
<code>fct_collapse()</code> nutzen. Dabei geben wir vor dem <code>=</code> den Namen der neuen
Kategorie an, nach dem <code>=</code> mit <code>c()</code> kombiniert die Namen der alten Kategorien
die wir zusammenfassen möchten.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="R3.html#cb70-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="R3.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partei =</span> <span class="fu">fct_collapse</span>(partei,</span>
<span id="cb70-3"><a href="R3.html#cb70-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">Union =</span> <span class="fu">c</span>(<span class="st">&quot;CDU&quot;</span>, <span class="st">&quot;CSU&quot;</span>)))</span>
<span id="cb70-4"><a href="R3.html#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="R3.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(stammdaten_19<span class="sc">$</span>partei)</span>
<span id="cb70-6"><a href="R3.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;AfD&quot;                   &quot;BÜNDNIS 90/DIE GRÜNEN&quot; &quot;Union&quot;                </span></span>
<span id="cb70-7"><a href="R3.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &quot;DIE LINKE.&quot;            &quot;FDP&quot;                   &quot;Plos&quot;                 </span></span>
<span id="cb70-8"><a href="R3.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [7] &quot;SPD&quot;</span></span></code></pre></div>
<p>Um die Kategorien manuell neu zu ordnen, könnten wir <code>fct_relevel()</code> nutzen.
Dazu müssten wir aber die gewünschte Reihenfolge per Hand notieren. Bequemer
geht es mit <code>fct_infreq()</code>, welche die Kategorien automatisch nach der
Häufigkeit Ihres Auftretens in den Daten ordnet. Also in unserem Fall von der
Kategorie mit den meisten Abgeordneten bis zu der mit den wenigsten.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="R3.html#cb71-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="R3.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partei =</span> <span class="fu">fct_infreq</span>(partei))</span>
<span id="cb71-3"><a href="R3.html#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="R3.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(stammdaten_19<span class="sc">$</span>partei)</span>
<span id="cb71-5"><a href="R3.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Union&quot;                 &quot;SPD&quot;                   &quot;AfD&quot;                  </span></span>
<span id="cb71-6"><a href="R3.html#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] &quot;FDP&quot;                   &quot;BÜNDNIS 90/DIE GRÜNEN&quot; &quot;DIE LINKE.&quot;           </span></span>
<span id="cb71-7"><a href="R3.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [7] &quot;Plos&quot;</span></span></code></pre></div>
<p>Damit sind die Daten zur weiteren Analyse vorbereitet. Wir können nun noch nicht
mehr benötigte Spalten entfernen um den tibble übersichtlich zu halten, sowie
die dann noch vorhandenen Spalten in eine sinnvollere Reihenfolge bringen.
Beides ist nicht zwingend notwendig, führt aber zu einem aufgeräumteren output
des tibbles.</p>
<p>Die Spalten “nachname”, “vorname” und “titel” sind nicht mehr notwendig, da wir
die enthaltenen Informationen in neue Variablen überführt haben.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="R3.html#cb72-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="R3.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(nachname<span class="sc">:</span>titel))</span>
<span id="cb72-3"><a href="R3.html#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="R3.html#cb72-4" aria-hidden="true" tabindex="-1"></a>stammdaten_19</span>
<span id="cb72-5"><a href="R3.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 6</span></span>
<span id="cb72-6"><a href="R3.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    partei     erste_WP letzte_WP alter name                  titel_dummy</span></span>
<span id="cb72-7"><a href="R3.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;fct&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;                 &lt;lgl&gt;      </span></span>
<span id="cb72-8"><a href="R3.html#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Union            12        19    65 Bleser, Peter         FALSE      </span></span>
<span id="cb72-9"><a href="R3.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 SPD              12        19    67 Brecht, Eberhard      TRUE       </span></span>
<span id="cb72-10"><a href="R3.html#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 DIE LINKE.       12        19    67 Dehm, Diether         TRUE       </span></span>
<span id="cb72-11"><a href="R3.html#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Union            11        19    65 Fuchtel, Hans-Joachim FALSE      </span></span>
<span id="cb72-12"><a href="R3.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 DIE LINKE.       11        19    69 Gysi, Gregor          TRUE       </span></span>
<span id="cb72-13"><a href="R3.html#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 DIE LINKE.       12        19    66 Jelpke, Ulla          FALSE      </span></span>
<span id="cb72-14"><a href="R3.html#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Union            12        19    68 Kauder, Volker        FALSE      </span></span>
<span id="cb72-15"><a href="R3.html#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 FDP              12        19    65 Kubicki, Wolfgang     FALSE      </span></span>
<span id="cb72-16"><a href="R3.html#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Union            11        19    63 Landgraf, Katharina   FALSE      </span></span>
<span id="cb72-17"><a href="R3.html#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 SPD              12        19    56 Matschie, Christoph   FALSE      </span></span>
<span id="cb72-18"><a href="R3.html#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
<p>Was eine sinnvolle Reihenfolge der verbleibenden Variablen sein kann ist
natürlich subjektiv, Ich würde aber folgende Reihenfolge vorschlagen und mit
<code>relocate()</code> umsetzen. Die Syntax funktioniert dabei ähnllich zu <code>select()</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="R3.html#cb73-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="ot">&lt;-</span> stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="R3.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(name, titel_dummy, partei, alter, erste_WP, letzte_WP)</span>
<span id="cb73-3"><a href="R3.html#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="R3.html#cb73-4" aria-hidden="true" tabindex="-1"></a>stammdaten_19</span>
<span id="cb73-5"><a href="R3.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 732 × 6</span></span>
<span id="cb73-6"><a href="R3.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    name                  titel_dummy partei     alter erste_WP letzte_WP</span></span>
<span id="cb73-7"><a href="R3.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;                 &lt;lgl&gt;       &lt;fct&gt;      &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span id="cb73-8"><a href="R3.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Bleser, Peter         FALSE       Union         65       12        19</span></span>
<span id="cb73-9"><a href="R3.html#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Brecht, Eberhard      TRUE        SPD           67       12        19</span></span>
<span id="cb73-10"><a href="R3.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Dehm, Diether         TRUE        DIE LINKE.    67       12        19</span></span>
<span id="cb73-11"><a href="R3.html#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Fuchtel, Hans-Joachim FALSE       Union         65       11        19</span></span>
<span id="cb73-12"><a href="R3.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Gysi, Gregor          TRUE        DIE LINKE.    69       11        19</span></span>
<span id="cb73-13"><a href="R3.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Jelpke, Ulla          FALSE       DIE LINKE.    66       12        19</span></span>
<span id="cb73-14"><a href="R3.html#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Kauder, Volker        FALSE       Union         68       12        19</span></span>
<span id="cb73-15"><a href="R3.html#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Kubicki, Wolfgang     FALSE       FDP           65       12        19</span></span>
<span id="cb73-16"><a href="R3.html#cb73-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Landgraf, Katharina   FALSE       Union         63       11        19</span></span>
<span id="cb73-17"><a href="R3.html#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Matschie, Christoph   FALSE       SPD           56       12        19</span></span>
<span id="cb73-18"><a href="R3.html#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 722 more rows</span></span></code></pre></div>
</div>
<div id="summarise-group_by" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> <code>summarise()</code> &amp; <code>group_by()</code></h3>
<p>Die Funktion <code>summarise()</code> ermöglicht es uns, zusammenfassende Maßzahlen zu
einem tibble zu berechnen. Die Syntax funktioniert dabei ähnlich zu <code>mutate()</code>.
Wir definieren einen Namen für die Spalte in der die Maßzahlen gelistet werden
sollen und nach dem <code>=</code> eine entsprechende Berechnung oder Funktion. Das
Ergebnis ist ein neuer tibble der die angeforderten Statistiken enthält.</p>
<p>Betrachten wir zunächst die Spalte “alter”. Wir könnten uns für das
arithmetische Mittel des Alters der MdBs interessieren. Dazu definieren wir
innerhalb von <code>summarise()</code> den Namen der neuen Spalte und nach dem <code>=</code> nutzen
wir die base R Funktion <code>mean()</code>:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="R3.html#cb74-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="R3.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter))</span>
<span id="cb74-3"><a href="R3.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 1</span></span>
<span id="cb74-4"><a href="R3.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   arith_mittel</span></span>
<span id="cb74-5"><a href="R3.html#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="do">##          &lt;dbl&gt;</span></span>
<span id="cb74-6"><a href="R3.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1         49.3</span></span></code></pre></div>
<p>Wir können uns auch mehrere Statistiken gleichzeitig ausgeben, indem wir die
entsprechenden Anfragen mit <code>,</code> verbinden:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="R3.html#cb75-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="R3.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb75-3"><a href="R3.html#cb75-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb75-4"><a href="R3.html#cb75-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb75-5"><a href="R3.html#cb75-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter))</span>
<span id="cb75-6"><a href="R3.html#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 4</span></span>
<span id="cb75-7"><a href="R3.html#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   minimum arith_mittel median maximum</span></span>
<span id="cb75-8"><a href="R3.html#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="do">##     &lt;int&gt;        &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb75-9"><a href="R3.html#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      24         49.3     50      77</span></span></code></pre></div>
<p>Das sieht alles schon ordentlich aus, ist aber auch auf einfacherem Wege
erzielbar, beispielsweise mit der praktischen base R Funktion <code>summary()</code>.
Wirklich mächtig wird <code>summarise()</code> erst durch die Kombination mit <code>group_by()</code>.
So können wir die Daten gruppieren und die zusammenfassenden Statistiken für
jede dieser Gruppen separat berechnen.</p>
<p>Unsere Daten bieten sich für eine Analyse nach Parteimitgliedschaft an. Als
ersten Schritt können wir die Daten also nach dem Inhalt der Spalte “partei”
gruppieren und zunächst einmal Zählen, wie viele Abgeordnete pro Partei im
Bundestag vertreten sind. Dazu nutzen wir innerhalb von <code>mutate()</code> die <strong>dplyr</strong>
Funktion <code>n()</code>, welche die Gruppengröße, also die Anzahl beobachtungen pro
Gruppe, zurückgibt.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="R3.html#cb76-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="R3.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partei) <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="R3.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">abgeordnete =</span> <span class="fu">n</span>())</span>
<span id="cb76-4"><a href="R3.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 7 × 2</span></span>
<span id="cb76-5"><a href="R3.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   partei                abgeordnete</span></span>
<span id="cb76-6"><a href="R3.html#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;                       &lt;int&gt;</span></span>
<span id="cb76-7"><a href="R3.html#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Union                         248</span></span>
<span id="cb76-8"><a href="R3.html#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 SPD                           162</span></span>
<span id="cb76-9"><a href="R3.html#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 AfD                            88</span></span>
<span id="cb76-10"><a href="R3.html#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 FDP                            84</span></span>
<span id="cb76-11"><a href="R3.html#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 BÜNDNIS 90/DIE GRÜNEN          71</span></span>
<span id="cb76-12"><a href="R3.html#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 DIE LINKE.                     69</span></span>
<span id="cb76-13"><a href="R3.html#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 7 Plos                           10</span></span></code></pre></div>
<p>Weiter oben haben wir das Durchschnittsalter aller Abgeordneten berechnet. Dies
können wir natürlich auch gruppiert nach der Partei machen.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="R3.html#cb77-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="R3.html#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partei) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="R3.html#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb77-4"><a href="R3.html#cb77-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb77-5"><a href="R3.html#cb77-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_abweichung =</span> <span class="fu">sd</span>(alter),</span>
<span id="cb77-6"><a href="R3.html#cb77-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb77-7"><a href="R3.html#cb77-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter))</span>
<span id="cb77-8"><a href="R3.html#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 7 × 6</span></span>
<span id="cb77-9"><a href="R3.html#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   partei                minimum arith_mittel std_abweichung median maximum</span></span>
<span id="cb77-10"><a href="R3.html#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;                   &lt;int&gt;        &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb77-11"><a href="R3.html#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Union                      24         49.9           9.69   50.5      75</span></span>
<span id="cb77-12"><a href="R3.html#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 SPD                        26         50.2           9.42   52        68</span></span>
<span id="cb77-13"><a href="R3.html#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 AfD                        26         50.8          12.5    49.5      77</span></span>
<span id="cb77-14"><a href="R3.html#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 FDP                        24         45.6          10.8    46        76</span></span>
<span id="cb77-15"><a href="R3.html#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 BÜNDNIS 90/DIE GRÜNEN      32         47.1           9.67   48        64</span></span>
<span id="cb77-16"><a href="R3.html#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 DIE LINKE.                 27         50.1           9.73   52        69</span></span>
<span id="cb77-17"><a href="R3.html#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 7 Plos                       31         45.7           8.19   44.5      59</span></span></code></pre></div>
<p>Oft ist es hilfreich die Daten nach einer Statistik die uns interessiert zu
ordnen. Möchten wir beispielsweise Wissen, welche Partei den höchsten
beziehungsweise niedrigsten Mittelwert des Alters hat, können wir die Ergebnisse
in einem weiteren Schritt mit der Funktion <code>arrange()</code> nach den Werten einer
Variable ordnen. Die zusätzliche Funktion <code>desc()</code> bewirkt, dass die Daten
absteigend geordnet werden.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="R3.html#cb78-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="R3.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partei) <span class="sc">%&gt;%</span> </span>
<span id="cb78-3"><a href="R3.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb78-4"><a href="R3.html#cb78-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb78-5"><a href="R3.html#cb78-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_abweichung =</span> <span class="fu">sd</span>(alter),</span>
<span id="cb78-6"><a href="R3.html#cb78-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb78-7"><a href="R3.html#cb78-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter)) <span class="sc">%&gt;%</span> </span>
<span id="cb78-8"><a href="R3.html#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(arith_mittel))</span>
<span id="cb78-9"><a href="R3.html#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 7 × 6</span></span>
<span id="cb78-10"><a href="R3.html#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   partei                minimum arith_mittel std_abweichung median maximum</span></span>
<span id="cb78-11"><a href="R3.html#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;                   &lt;int&gt;        &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb78-12"><a href="R3.html#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 AfD                        26         50.8          12.5    49.5      77</span></span>
<span id="cb78-13"><a href="R3.html#cb78-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 SPD                        26         50.2           9.42   52        68</span></span>
<span id="cb78-14"><a href="R3.html#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 DIE LINKE.                 27         50.1           9.73   52        69</span></span>
<span id="cb78-15"><a href="R3.html#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Union                      24         49.9           9.69   50.5      75</span></span>
<span id="cb78-16"><a href="R3.html#cb78-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 BÜNDNIS 90/DIE GRÜNEN      32         47.1           9.67   48        64</span></span>
<span id="cb78-17"><a href="R3.html#cb78-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 Plos                       31         45.7           8.19   44.5      59</span></span>
<span id="cb78-18"><a href="R3.html#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 7 FDP                        24         45.6          10.8    46        76</span></span></code></pre></div>
<p>Die Spalte “titel_dummy” ist ein logischer Vektor der <code>TRUE</code> enthält, wenn ein
MdB einen akademischen Titel besitzt und <code>FALSE</code>, wenn keiner vorliegt. Hinter
einem logischen Vektor stehen Zahlenwerte. <code>TRUE</code> ist die Repräsentation von 1,
<code>FALSE</code> von 0. Wir können also direkt mit den Werten des Vektors rechnen. Um die
absolute Anzahl an Titeln zu berechenn, reicht es also Summe des Vektors zu
bilden. Alle Werte des vektors werden aufaddiert und da wir nur Einsen und
Nullen haben, ist das Ergebnis gleich der Anzahl der Abgeordneten die einen
akademischen Titel tragen. Um den relativen Anteil zu berechnen, können wir das
arithmetische Mittel nutzen. Alle Einsen und Nullen werden aufaddiert und durch
die Anzahl der Beobachtungen geteilt. Dies ist der Anteil der Abgeordneten mit
Titel.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="R3.html#cb79-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="R3.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">absolut =</span> <span class="fu">sum</span>(titel_dummy),</span>
<span id="cb79-3"><a href="R3.html#cb79-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">relativ =</span> <span class="fu">mean</span>(titel_dummy)</span>
<span id="cb79-4"><a href="R3.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb79-5"><a href="R3.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 × 2</span></span>
<span id="cb79-6"><a href="R3.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   absolut relativ</span></span>
<span id="cb79-7"><a href="R3.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="do">##     &lt;int&gt;   &lt;dbl&gt;</span></span>
<span id="cb79-8"><a href="R3.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     143   0.195</span></span></code></pre></div>
<p>Wir könnten uns dafür interessieren, ob sich das Alter der Abgeordneten mit
Titel von denen unterscheidet die keinen Titel tragen. Dazu gruppieren wir nach
der Spalte “titel_dummy” und berechnen die Statistiken zum Alter.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="R3.html#cb80-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="R3.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(titel_dummy) <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="R3.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb80-4"><a href="R3.html#cb80-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb80-5"><a href="R3.html#cb80-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_abweichung =</span> <span class="fu">sd</span>(alter),</span>
<span id="cb80-6"><a href="R3.html#cb80-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb80-7"><a href="R3.html#cb80-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter))</span>
<span id="cb80-8"><a href="R3.html#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 6</span></span>
<span id="cb80-9"><a href="R3.html#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   titel_dummy minimum arith_mittel std_abweichung median maximum</span></span>
<span id="cb80-10"><a href="R3.html#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;lgl&gt;         &lt;int&gt;        &lt;dbl&gt;          &lt;dbl&gt;  &lt;int&gt;   &lt;int&gt;</span></span>
<span id="cb80-11"><a href="R3.html#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 FALSE            24         48.9           10.1     49      77</span></span>
<span id="cb80-12"><a href="R3.html#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 TRUE             28         50.8           10.8     50      76</span></span></code></pre></div>
<p>Wir können auch nach mehreren Spalten gleichzeitig gruppieren. In diesem Fall
werden die Statistiken für jede Gruppenkombination berechnet.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="R3.html#cb81-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="R3.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partei, titel_dummy) <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a href="R3.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb81-4"><a href="R3.html#cb81-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb81-5"><a href="R3.html#cb81-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_abweichung =</span> <span class="fu">sd</span>(alter),</span>
<span id="cb81-6"><a href="R3.html#cb81-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb81-7"><a href="R3.html#cb81-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter))</span>
<span id="cb81-8"><a href="R3.html#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;partei&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb81-9"><a href="R3.html#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 14 × 7</span></span>
<span id="cb81-10"><a href="R3.html#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   partei [7]</span></span>
<span id="cb81-11"><a href="R3.html#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="do">##    partei         titel_dummy minimum arith_mittel std_abweichung median maximum</span></span>
<span id="cb81-12"><a href="R3.html#cb81-12" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;fct&gt;          &lt;lgl&gt;         &lt;int&gt;        &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb81-13"><a href="R3.html#cb81-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Union          FALSE            24         49.6           9.71   51        70</span></span>
<span id="cb81-14"><a href="R3.html#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Union          TRUE             32         51.0           9.63   50        75</span></span>
<span id="cb81-15"><a href="R3.html#cb81-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 SPD            FALSE            26         50.1           9.56   52        68</span></span>
<span id="cb81-16"><a href="R3.html#cb81-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 SPD            TRUE             33         50.8           8.83   49        67</span></span>
<span id="cb81-17"><a href="R3.html#cb81-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 AfD            FALSE            26         49.6          12.0    49        77</span></span>
<span id="cb81-18"><a href="R3.html#cb81-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 AfD            TRUE             28         54.8          13.5    55.5      76</span></span>
<span id="cb81-19"><a href="R3.html#cb81-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 FDP            FALSE            24         44.8           9.79   46        66</span></span>
<span id="cb81-20"><a href="R3.html#cb81-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 FDP            TRUE             31         48.7          13.9    46        76</span></span>
<span id="cb81-21"><a href="R3.html#cb81-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 BÜNDNIS 90/DI… FALSE            32         48.1           9.75   49        64</span></span>
<span id="cb81-22"><a href="R3.html#cb81-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 BÜNDNIS 90/DI… TRUE             33         43.8           8.87   42.5      64</span></span>
<span id="cb81-23"><a href="R3.html#cb81-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 DIE LINKE.     FALSE            27         48.7           9.72   50        66</span></span>
<span id="cb81-24"><a href="R3.html#cb81-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 DIE LINKE.     TRUE             48         56.8           6.67   56        69</span></span>
<span id="cb81-25"><a href="R3.html#cb81-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 Plos           FALSE            31         45.9           9.14   44.5      59</span></span>
<span id="cb81-26"><a href="R3.html#cb81-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 Plos           TRUE             42         45             4.24   45        48</span></span></code></pre></div>
<p>An dieser Stelle müssen wir noch über eine Besonderheit in der Zusammenarbeit
von <code>group_by()</code> und <code>summarise()</code> sprechen, welche zu Problemen führen kann,
wenn Sie sich ihr nicht bewusst sind. Grundsätzlich wird jeder Aufruf von
<code>summarise()</code> nach einem <code>group_by()</code> Befehl eine Ebene der Gruppierung
auflösen. Für die Beispiele in denen wir nur nach Partei oder Titel gruppiert
hhaben, bedeutet dies also, dass die Daten nach dem <code>summarise()</code> Befehl nicht
mehr gruppiert waren. Wir hatten eine Gruppierungsebene und diese wurde
automatisch entfernt. Im letzten Beispiel hatten wir zwei Gruppierungsebenen.
Von diesen wurde nur die niedrigere Gruppierungsebene – die Reihenfolge der
Variablen in <code>group_by()</code> bestimmt auch die reihenfolge der Gruppierung –, also
die Gruppierung nach dem Titel aufgelöst. Die Gruppierung nach der
Parteimitgliedschaft ist weiterhin aktiv. Dies ist auch im output anhand der
Zeile <code># Groups:   partei [7]</code> erkennbar. Die Daten sind nach der Partei
gruppiert und wir haben 7 Gruppen. Möchten wir mit den Ergebnissen dieser
Berechnungen weiterarbeiten, müssen wir uns auch über die Gruppierung bewusst
sein. Sollen die Daten weiterhin gruppiert sein? Dann ist alles gut, sollen
sie es nicht sein müssen wir die Gruppierung vollständig auflösen. Dies machen
wir mit der Funktion <code>ungroup()</code>. Solange Sie sich nicht sicher sind, dass Sie
die Gruppierung wirklich weiterhin brauchen, würde ich immer zu einem
<code>ungroup()</code> am Ende einer <code>group_by()</code> und <code>summarise()</code> Operation mit mehreren
Gruppen tendieren. So verhindern sie versehentliche Berechnungen auf
Gruppenbasis und die Gruppierung lässt sich jederzeit schnell wieder herstellen,
sollten dies notwendig werden.</p>
<p><code># Groups:   district [2]</code>. Another <code>summarise()</code> function would compute the
statistic by “district” and then remove this level as well. We can also use
<code>ungroup()</code> to remove all grouping from a tibble. In the case of this example,
it does not make a practical difference as we only compute the summary and then
move on. But, if we assign the results of a summary to an object for later use,
we have to decide if we want to remove the grouping or keep it in effect,
depending on the goals of the analysis. In general, I would always ungroup the
data and group it again if the need arises, as this is less error prone and just
a minor increase in the amount of typing needed.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="R3.html#cb82-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="R3.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partei, titel_dummy) <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="R3.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb82-4"><a href="R3.html#cb82-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb82-5"><a href="R3.html#cb82-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_abweichung =</span> <span class="fu">sd</span>(alter),</span>
<span id="cb82-6"><a href="R3.html#cb82-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb82-7"><a href="R3.html#cb82-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter)) <span class="sc">%&gt;%</span> </span>
<span id="cb82-8"><a href="R3.html#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb82-9"><a href="R3.html#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;partei&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb82-10"><a href="R3.html#cb82-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 14 × 7</span></span>
<span id="cb82-11"><a href="R3.html#cb82-11" aria-hidden="true" tabindex="-1"></a><span class="do">##    partei         titel_dummy minimum arith_mittel std_abweichung median maximum</span></span>
<span id="cb82-12"><a href="R3.html#cb82-12" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;fct&gt;          &lt;lgl&gt;         &lt;int&gt;        &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;   &lt;int&gt;</span></span>
<span id="cb82-13"><a href="R3.html#cb82-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Union          FALSE            24         49.6           9.71   51        70</span></span>
<span id="cb82-14"><a href="R3.html#cb82-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Union          TRUE             32         51.0           9.63   50        75</span></span>
<span id="cb82-15"><a href="R3.html#cb82-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 SPD            FALSE            26         50.1           9.56   52        68</span></span>
<span id="cb82-16"><a href="R3.html#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 SPD            TRUE             33         50.8           8.83   49        67</span></span>
<span id="cb82-17"><a href="R3.html#cb82-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 AfD            FALSE            26         49.6          12.0    49        77</span></span>
<span id="cb82-18"><a href="R3.html#cb82-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 AfD            TRUE             28         54.8          13.5    55.5      76</span></span>
<span id="cb82-19"><a href="R3.html#cb82-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 FDP            FALSE            24         44.8           9.79   46        66</span></span>
<span id="cb82-20"><a href="R3.html#cb82-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 FDP            TRUE             31         48.7          13.9    46        76</span></span>
<span id="cb82-21"><a href="R3.html#cb82-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 BÜNDNIS 90/DI… FALSE            32         48.1           9.75   49        64</span></span>
<span id="cb82-22"><a href="R3.html#cb82-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 BÜNDNIS 90/DI… TRUE             33         43.8           8.87   42.5      64</span></span>
<span id="cb82-23"><a href="R3.html#cb82-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 11 DIE LINKE.     FALSE            27         48.7           9.72   50        66</span></span>
<span id="cb82-24"><a href="R3.html#cb82-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 12 DIE LINKE.     TRUE             48         56.8           6.67   56        69</span></span>
<span id="cb82-25"><a href="R3.html#cb82-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 13 Plos           FALSE            31         45.9           9.14   44.5      59</span></span>
<span id="cb82-26"><a href="R3.html#cb82-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 14 Plos           TRUE             42         45             4.24   45        48</span></span></code></pre></div>
</div>
<div id="speichern-der-daten" class="section level3" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> Speichern der Daten</h3>
<p>Wir werden im nächsten Kapitel mit den hier transformierten Daten
weiterarbeiten. Dazu sollten Sie entweder zu Beginn des Kapitels das script aus
diesem Kapitel nochmals durchlaufen lassen, oder sie speichern die bearbeiteten
Daten:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="R3.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(stammdaten_19, <span class="at">file =</span> <span class="st">&quot;stammdaten_19.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="export-von-tabellen" class="section level3" number="3.2.7">
<h3><span class="header-section-number">3.2.7</span> Export von Tabellen</h3>
<p>Das Exportieren von Tabellen – beispielsweise die oben berechneten Statistiken
– aus R ist leider nicht ganz so einfach wie man denken oder hoffen würde. Wir
können natürlich immer copy &amp; paste nutzen um die Werte in Word oder eine
sonstige Software zu kopieren, dies aber nicht nur langweilige Fleißarbeit
sondern auch fehleranfällig, vor allem bei umfassenderen Analysen als die, die
wir bisher betrachet haben.</p>
<p>Ein flexibler Weg zum direkten Export von Tabellen ist es, diese als “.csv”
abzuspeichern. Diese Format kann wiedrum direkt in Excel und vermutlich auch in
Word importiert werden. Da ich kein aktiver Office Nutzer bin, kann Ich Ihnen
hier nur begrenzte praktische Ratschläge geben. Der Import sollte aber im
Normalfall möglich sein.</p>
<p><em>CSV</em> steht für “comma-separated values”. Da diese sehr einfach gehalten sind
und von einer großen Bandbreite an Software verarbeitet werden können, ist dies
eines der meistgenutzten Datenformate.</p>
<p>Die Grundstruktur ist dabei wie folgt:</p>
<pre><code>column1, column2, column3
data1_1, data1_2, data1_3
data2_1, data2_2, data2_3
data3_1, data3_2, data3_3</code></pre>
<p>Die Zeilen einer Tabelle sind durch Zeilenumbrüche getrennt, die Spalten durch
Kommas.</p>
<p>So können wir beispielsweise das Ergebnis einer <code>summarise()</code> Operation mit
<code>write_csv()</code> aus <strong>readr</strong> (core tidyverse) abspeichern.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="R3.html#cb85-1" aria-hidden="true" tabindex="-1"></a>stammdaten_19 <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="R3.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(partei, titel_dummy) <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="R3.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">minimum =</span> <span class="fu">min</span>(alter),</span>
<span id="cb85-4"><a href="R3.html#cb85-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">arith_mittel =</span> <span class="fu">mean</span>(alter),</span>
<span id="cb85-5"><a href="R3.html#cb85-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">std_abweichung =</span> <span class="fu">sd</span>(alter),</span>
<span id="cb85-6"><a href="R3.html#cb85-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(alter),</span>
<span id="cb85-7"><a href="R3.html#cb85-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">maximum =</span> <span class="fu">max</span>(alter)) <span class="sc">%&gt;%</span> </span>
<span id="cb85-8"><a href="R3.html#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb85-9"><a href="R3.html#cb85-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="at">file =</span> <span class="st">&quot;alter_partei_titel_1.csv&quot;</span>)</span>
<span id="cb85-10"><a href="R3.html#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;partei&#39;. You can override using the `.groups` argument.</span></span></code></pre></div>
<p>Aus Gründen die vermutlich nur Microsoft selbst bekannt sind, können “.csv”
Dateien in denen die Spalten durch Kommas getrennt sind – der internationale
Standard – auf deutschen Windows Systemen nicht ohne weiteres importiert
werden. Nutzen Sie statt Microsoft Office die open source Alternative Libre
Office, ist das Problem bereits behoben. Möchten Sie aber Microsoft Office
auf einem deutschen System nutzen, sollten Sie die Datei im Deutschen Standard
– statt Kommas werden Semikolons als Trennzeichen der Spalten verwendet (die
Kommas werden zur Darstellung von Dezimalzahlen benötigt) – speichern. Dies ist
mit <code>write_csv2()</code> auf einfachem Wege möglich..</p>
<p>Mehr zu “.csv” Dateien finden sie unter:
<a href="https://jakobtures.github.io/web-scraping/files.html" target="_blank">https://jakobtures.github.io/web-scraping/files.html</a></p>
<div id="weiterführende-resourcen" class="section level4" number="3.2.7.1">
<h4><span class="header-section-number">3.2.7.1</span> Weiterführende Resourcen</h4>
<p>Es existiert eine Vielzahl von packages die Funktionen zur Formatierung und dem
Export von Tabellen mitbringen. Aus Platzgründen können wir nicht auf die
Details eingehen, hier aber einige Startpunkte:</p>
<p>Möchten sie direkt nach “.xlsx” exportieren, wären zwei der Optionen:
* <strong>writexl</strong>: <a href="https://cran.r-project.org/web/packages/writexl/index.html" target="_blank">https://cran.r-project.org/web/packages/writexl/index.html</a>
* <strong>openxlsx</strong>: <a href="https://cran.r-project.org/web/packages/openxlsx/index.html" target="_blank">https://cran.r-project.org/web/packages/openxlsx/index.html</a></p>
<p>Tabellen direkt im “.docx” Format zu erstellen ermöglicht <strong>flextable</strong>:
<a href="https://davidgohel.github.io/flextable/" target="_blank">https://davidgohel.github.io/flextable/</a></p>
<p><strong>huxtable</strong> kann Tabellen im “.tex” Foramt zur Arbeit in LaTeX ausgeben:
<a href="https://hughjonesd.github.io/huxtable/" target="_blank">https://hughjonesd.github.io/huxtable/</a></p>
<p>Möchten sie externe Software zum Schreiben von Hausarbieten und Papers ganz
umgehen, könnte <em>R Markdown</em> für Sie von Interesse sein. Dies ermöglicht das
gleichzeitige Schreiben von Text und Code in einem Dokument. Die Ausgabe ist
unter anderem in “.pdf” möglich und kann neben dem Text auch Code der
dargettellt werden soll sowie Tabellen und Grafiken enthalten. Einige Resourcen
zu R Markdown finden Sie hier:</p>
<ul>
<li>Einführung der RStudio website: <a href="https://rmarkdown.rstudio.com/lesson-1.html" class="uri">https://rmarkdown.rstudio.com/lesson-1.html</a>{target_“blank”}</li>
<li>Das R Markdown cheat sheet: <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/rmarkdown-2.0.pdf" target="_blank">https://raw.githubusercontent.com/rstudio/cheatsheets/master/rmarkdown-2.0.pdf</a></li>
<li>Kapitel zu R Markdown in “R for Data Science” von Hadley Wickham und Garrett Grolemund: <a href="https://r4ds.had.co.nz/r-markdown.html" target="_blank">https://r4ds.had.co.nz/r-markdown.html</a></li>
<li>“R Markdown Cookbook” von Yihui Xie, Christophe Dervieux, Emily Riederer: <a href="https://bookdown.org/yihui/rmarkdown-cookbook/" target="_blank">https://bookdown.org/yihui/rmarkdown-cookbook/</a></li>
</ul>
<p>Die Website die Sies aktuell betrachten sowie viele der verlinkten Resourcen
sind mit <strong>bookdown</strong> geschrieben, welches auf R Markdown aufbaut und sich vor
allem für umfangreichere Projekte eignet.</p>
<ul>
<li>“bookdown: Authoring Books and Technical Documents with R Markdown” von Yihui Xie: <a href="https://bookdown.org/yihui/bookdown/" target="_blank">https://bookdown.org/yihui/bookdown/</a></li>
</ul>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="R2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="R4.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JakobTures/quanti-text.git/03-R3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
